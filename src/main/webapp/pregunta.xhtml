<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">
  <f:metadata>
    <f:viewParam name="id" value="#{leerPregunta.preguntaPedida.idPregunta}"/>
    <f:viewAction action="#{leerPregunta.mostrarPregunta()}"/>
  </f:metadata>
  <h:head>
    <title>Mis Tr√°mites Ciencias - #{leerPregunta.preguntaPedida.titulo}</title>
  </h:head>
  <h:body>
    <p:menubar>
      <f:facet name="options">
        <h:form>
          <h:inputText value="#{leerPregunta.busqueda}"/>
          <h:commandButton action="#{leerPregunta.enviaBusqueda()}" value="Buscar"/>
        </h:form>
      </f:facet>
    </p:menubar>
    <b:container>

      <b:row>
        <b:column col-sm="12">
          <h4>
            #{leerPregunta.preguntaPedida.titulo}
          </h4>
        </b:column>
        <b:column col-sm="8">
          <p>
            #{leerPregunta.preguntaPedida.pregunta}
          </p>
        </b:column>
        <b:column col-sm="1">
          <p:link style="color:blue;" value="Editar" outcome="actualizar">
            <f:param name="id" value="#{leerPregunta.preguntaPedida.idPregunta}"/>
          </p:link>
        </b:column>
        <b:column col-sm="1" offset-sm="8">
          Preguntado el <span>#{leerPregunta.preguntaPedida.fechaPublicacion}</span>
        </b:column>
        <b:column col-sm="2">
          por <span>#{leerPregunta.preguntaPedida.usuario.nombreUsuario}</span>
        </b:column>
      </b:row>
      <p:separator/>

      <p:dataScroller value="#{leerPregunta.comentariosPregunta}" chunkSize="10" var="comentario">
        <b:row>
          <b:column col-sm="12" col-md="8" col-lg="10">
            <p>
              #{comentario.comentario}
            </p>
          </b:column>
          <b:column col-sm="2">
            <p:outputLabel value="#{comentario.fecha}"/>
          </b:column>
          <b:column col-sm="2">
            <p:outputLabel value="#{comentario.usuario.nombreUsuario}"/>
               
          </b:column>
         </b:row>
          <p:commandButton value="Editar" actionListener="#{actComentario.cambiaVistaActualizar(true,comentario)}" update="coment"  rendered="#{actComentario.esUsuario(comentario)}" style="float: right;margin-right:10px"/>
          
          <div  style="position:fixed; bottom:0; width: 85% ; padding-bottom:1em; align-content: center; "> 
            <h:form id="panelActualiza" rendered="#{actComentario.editar}">
                  <p:inputTextarea value="#{actComentario.texto}" maxlength="5000" autoResize="false" style="height: 100px; width: 90%; margin:0.5em 2em 0.5em 2em">
                      #{comentario.comentario}
                  </p:inputTextarea>
                  <p:commandButton value="Actualizar" actionListener="#{actComentario.fooActualizar()}"  style="width:10%;  float: right;margin-right:10px" />
              </h:form>
          </div>   
          <p:separator/>
      </p:dataScroller>
        <div  style="position:fixed; bottom:0; width: 85% ; padding-bottom:1em; align-content: center; ">
            
            <h:form  id="coment" rendered="#{actComentario.comentar}">
                <p:inputTextarea value="#{crearComentario.texto}" maxlength="5000" autoResize="false" style="height: 100px; width: 90%; margin:0.5em 2em 0.5em 2em"/>
                
                <p:commandButton value="Comentar" actionListener="#{crearComentario.comentar(leerPregunta.preguntaPedida)}" style="width:10%;  float: right;margin-right:10px" />
                
            </h:form>           
        </div>
    </b:container>
      
  </h:body>
</html>

